<div class="main">
  <div class="register-container">
    <h2 class="register-title">Register</h2>

    <!-- Loading Spinner -->
    @if (loading) {
      <div class="loading-container">
        <div class="spinner"></div>
        <p class="loading-text">Registering...</p>
      </div>
    }

    @if (!loading) {
      <form (ngSubmit)="register()" #regForm="ngForm" class="register-form">

        <!-- Full Name -->
        <div class="form-group">
          <label class="form-label">Full Name</label>
          <input 
            type="text" 
            [(ngModel)]="registerDto.fullName" 
            name="fullName" 
            required 
            class="form-input"
            placeholder="name example...."
          />
        </div>

        <!-- Username -->
        <div class="form-group">
          <label class="form-label">Email</label>
          <input 
            type="text" 
            [(ngModel)]="registerDto.userName" 
            name="userName" 
            required 
            class="form-input"
            placeholder="example@test.com..."
          />
        </div>

        <!-- Password -->
        <div class="form-group password-wrapper">
          <label class="form-label">Password</label>
          <input
            [type]="showPassword ? 'text' : 'password'"
            [(ngModel)]="registerDto.password"
            name="password"
            required
            class="form-input"
            placeholder="qw745E@*"
          />
          <i
            class="bi toggle-password"
            [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"
            (click)="togglePassword()"
            title="Show/Hide Password"
          ></i>
        </div>

        <!-- Gender -->
        <div class="form-group">
          <label class="form-label">Gender</label>
          <select [(ngModel)]="registerDto.gender" name="gender" required class="form-input">
            <option value="" disabled selected>Select your gender</option>
            <option [ngValue]="true">Male</option>
            <option [ngValue]="false">Female</option>
          </select>
        </div>

        <!-- University -->
        <div class="form-group">
          <label class="form-label">University</label>
          <select [(ngModel)]="registerDto.universityId" name="universityId"
                  (change)="onUniversityChange(registerDto.universityId)" required class="form-input">
            <option value="">-- Select University --</option>
            @for (uni of universities; track uni.id) {
              <option [value]="uni.id">{{ uni.name }}</option>
            }
          </select>
        </div>

        <!-- College -->
        <div class="form-group">
          <label class="form-label">College</label>
          <select [(ngModel)]="registerDto.collegeId" name="collegeId" required class="form-input">
            <option value="">-- Select College --</option>
            @for (col of colleges; track col.id) {
              <option [value]="col.id">{{ col.name }}</option>
            }
          </select>
        </div>

        <!-- Submit -->
        <button type="submit" [disabled]="regForm.invalid" class="btn-submit">Register</button>

      </form>
    }

    @if (errorMessage) {
      <p class="error">{{ errorMessage }}</p>
    }
  </div>
</div>