<div class="update-container">
  <div class="header">
    <h2>Update Exam</h2>
    <button type="button" routerLink="/courses" class="btn btn-secondary">Back to List</button>
  </div>

  <form [formGroup]="examForm" (ngSubmit)="submit()" class="exam-form">
    <!-- Basic Information -->
    <div class="form-section">
      <h3>Basic Information</h3>

      <div class="form-row">
        <label for="name">Exam Name *</label>
        <input id="name" type="text" formControlName="name" class="form-control" />
      </div>

      <div class="form-row">
        <label for="timeExam">Exam Time (minutes) *</label>
        <input id="timeExam" type="number" formControlName="timeExam" class="form-control" />
      </div>

      <div class="form-row">
        <label>
          <input type="checkbox" formControlName="isActive" />
          Active
        </label>
      </div>
    </div>

    <!-- Exam Questions -->
    <div class="form-section">
      <h3>Exam Questions</h3>
      @if (examQuestions.controls.length > 0) {
        <div class="questions-list">
          @for (q of examQuestions.controls; track q.value.id) {
            <div class="question-item">
              <input type="checkbox" [formControl]="q.get('isSelected')" />
              <span>Question : {{ q.tittle }}</span>
            </div>
          }
        </div>
      } @else {
        <p class="muted">No questions found for this exam.</p>
      }
    </div>

    <!-- Actions -->
    <div class="form-actions">
      <button type="button" routerLink="/courses" class="btn btn-secondary" [disabled]="loading">
        Cancel
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="examForm.invalid || loading">
        @if (loading) {
          <span class="spinner"></span> Updating...
        } @else {
          Update Exam
        }
      </button>
    </div>
  </form>

  @if (loading) {
    <div class="loading-overlay">
      <div class="loading-spinner">Loading...</div>
    </div>
  }
</div>
